<!DOCTYPE html>
<html>
<head>
<title>Google Login Only</title>
<style>
body{margin:0;height:100%;background:#0b0d10;color:#e6eef3;font-family:Arial}
header{height:60px;display:flex;align-items:center;justify-content:space-between;padding:0 24px;background:#111;border-bottom:1px solid #222}
h3{margin:0;font-size:18px;font-weight:600;color:#fff}
button{
  padding:6px 14px;cursor:pointer;border:none;border-radius:6px;font-size:14px;
}
.btn-copy{background:#1e88e5;color:#fff}
.btn-logout{background:#d32f2f;color:#fff}
#content{padding:40px;text-align:center}
</style>
<script src="https://accounts.google.com/gsi/client" async defer></script>
</head>

<body>
<header>
  <h3>atom</h3>
  <div id="auth"></div>
</header>

<div id="content"></div>

<script>
const client_id = "670321565295-595eb9d8oipdro744qbg7c9tn1s2h6nr.apps.googleusercontent.com";

function mountGoogleBtn(){
  const el = document.getElementById("auth");
  el.innerHTML = "";
  google.accounts.id.initialize({
    client_id,
    callback: handleCredentialResponse
  });
  google.accounts.id.renderButton(el, {
    type:"standard",
    size:"medium"
  });
}

function handleCredentialResponse(r){
  localStorage.setItem("token", r.credential);
  render();
}

function logout(){
  localStorage.removeItem("token");
  google.accounts.id.disableAutoSelect();
  render();
}

function copyToken(){
  const token = localStorage.getItem("token");
  if(token) navigator.clipboard.writeText(token);
}

function showLoginUI(){
  mountGoogleBtn();
  document.getElementById("content").innerHTML = "";
}

function showLoggedInUI(){
  document.getElementById("auth").innerHTML =
    `<button class="btn-logout" onclick="logout()">Logout</button>`;
  document.getElementById("content").innerHTML =
    `<button class="btn-copy" onclick="copyToken()">Copy Token</button>`;
}

function render(){
  const token = localStorage.getItem("token");
  if(!token) showLoginUI();
  else showLoggedInUI();
}

window.onload = render;
</script>
</body>
</html>
